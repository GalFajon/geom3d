<html>
    <head>
        <link rel="stylesheet" type="text/css" href="./dependencies/potree/build/potree/potree.css">
        <link rel="stylesheet" type="text/css" href="./dependencies/potree/build/libs/jquery-ui/jquery-ui.min.css">
        <link rel="stylesheet" type="text/css" href="./dependencies/potree/build/libs/openlayers3/ol.css">
        <link rel="stylesheet" type="text/css" href="./dependencies/potree/build/libs/spectrum/spectrum.css">
        <link rel="stylesheet" type="text/css" href="./dependencies/potree/build/libs/jstree/themes/mixed/style.css">

        <script src="./dependencies/potree/build/libs/jquery/jquery-3.1.1.min.js"></script>
        <script src="./dependencies/potree/build/libs/spectrum/spectrum.js"></script>
        <script src="./dependencies/potree/build/libs/jquery-ui/jquery-ui.min.js"></script>

        <script src="./dependencies/potree/build/libs/other/BinaryHeap.js"></script>
        <script src="./dependencies/potree/build/libs/tween/tween.min.js"></script>
        <script src="./dependencies/potree/build/libs/d3/d3.min.js"></script>
        <script src="./dependencies/potree/build/libs/proj4/proj4.js"></script>
        <script src="./dependencies/potree/build/libs/openlayers3/ol.js"></script>
        <script src="./dependencies/potree/build/libs/i18next/i18next.js"></script>
        <script src="./dependencies/potree/build/libs/jstree/jstree.js"></script>
        <script src="./dependencies/potree/build/potree/potree.js"></script>
        <script src="./dependencies/potree/build/libs/plasio/js/laslaz.js"></script>
    </head>

    <body>
        <div class="potree_container" style="position: absolute; width: 100%; height: 100%; left: 0px; top: 0px; ">
            <div id="potree_render_area"></div>
            <div id="potree_sidebar_container"> </div>
        </div>

        <script type="module">
            import { initialize, setView, PointcloudLayer, GeometryLayer, Line, Polygon, Point, View, Draw, Snap, Select, Modify, OverlayLayer, Overlay, GLTFLayer, IFCLayer, GeoJSON } from './geom3d.js';

            async function main() {
                await initialize({
                    viewer: {
                        background: 'skybox'
                    }
                })

                let ifcLayer = new IFCLayer({ urls: [ 
                    //'http://localhost:3000/ifcs/test/test.ifc'
                    'https://projekti.lgb.si/WebPointCloud/IFC/20211110_Marina_Garage_RTC360/Marina_garage_pipes_DX100000_DY460000_DZ300.ifc'
                ] });

                let geomLayer = new GeometryLayer({ geometries: [ new Point([0,0,0]), new Point([10,0,0]), new Point([0,10,0])  ] });

                let view = new View({
                    layers: [ geomLayer ],
                    interactions: [ new Modify({ layer: geomLayer }), new Snap({ layers: [ geomLayer ] }), new Select({ layer: geomLayer }) ]
                });

                await setView(view);
                view.center();

                window.view = view;
                //view.removeInteraction(sel)
            }

            main();
        </script>
    </body>
</html>